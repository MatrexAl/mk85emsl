# mk85emsl
Эмулятор микрокомпьютера "Электроника МК85" с командной строкой, с возможностью компиляции Бейсик и Ассемблер (PDP11) программ.

За основу взяты исходники с сайта https://calculators.pdp-11.ru/.

Программа написана на Lazarus 2.2.6 и протестирована под Windows 10.

# Что реализовано
- возможность работы с командной строкой;
- возможность быстрой загрузки Бейсик программ;
- Ассемблер;
- Доработан исходный код ПЗУ для корректной компиляции;
- пример программы "Hello word!" на Ассемблере;
- анимация движения по коду и комментарии в дебагере.

# Справка по параметрам коммандной строки
- -basfn <имя_файла> Имя файла Бейсик программы для загрузки ее в ОЗУ (RAM). Параметр -ramfn при этом должен быть обязательно заполнен.
- -ramfn <имя_файла> Имя файла для загрузки ОЗУ (RAM).
- -ramfs <число> Размер ОЗУ (RAM) в байтах (корректное значение кратно 2048 байт).
- -asmfn <имя_файла> Имя файла Ассемблер программы для загрузки в ПЗУ (ROM). Параметр -romfn при этом должен быть обязательно заполнен.
- -romfn <имя_файла> Имя файла для загрузки ПЗУ (ROM).
- -ar <0> Автозапуск указанной Бейсик программы после запуска приложения.
- -cs <число> Скорость. Чем менше, тем медленнее (нормальное значение 250).
- -cm <0, 1, 2> Метод закрытия программы: 0 - выключатель, 1 - кнопка закрыть, 2 - закрыть после запуска (бывает полезно для "тихой" компиляции Бейсик и Ассемблер программ).
- -ct <0..9> Контрастность дисплея (0 - самая светлая).
- -help, -h Вызов справки.

# Примеры запуска из командной строки
Автоматически зпустить Бейсик программу:
- mk85m.exe -basfn "runner.bas" -ramfn "runner.ram" -ar 0

Компиляция и запуск Ассемблер программы "Hello word!":
- mk85m.exe -asmfn "helloworld.asm" -romfn "helloworld.rom"

Компиляция и запуск исходгого кода микрокомпьютера "Электроника МК85":
- mk85m.exe -asmfn "mk85.asm" -romfn "mk85.rom"

"Тихая" компиляция исходгого кода микрокомпьютера "Электроника МК85":
- mk85m.exe -asmfn "mk85.asm" -romfn "mk85.rom" -cm 2

# Замечания по компилятору Ассемблер
- Разработку лучше всего выполнять в Notepad++ со включенной подсветкой синтакисиса в кодировке UTF8.
- Метки перехода рекомендуется начинать с буквы "l", например "lPrint" т. к. ввиду особенностей декодирования адресов в мемониках символы "0".."F" в начале строки будут интерпретироваться как "число", что будет вызывать скрытые ошибки. Нарпимер метка "dPrint" (начинается с "D") будет в первую очередь интерпретироваться как шестнадцатиричное число и уведомления об ошибке не будет. 
